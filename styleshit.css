@font-face 
{
  font-family: "Source Code Pro";
  src: 
    url('/stuff/font.otf.woff2') format("woff2"),
    url('/stuff/font.otf') format("opentype");
}

:root 
{
  --cb: cubic-bezier(0.25, 1, 0.5, 1);
  --cb-io: cubic-bezier(0.76, 0, 0.24, 1);
  --trans: all .3s ease-in-out 0s;
  --trans-fast: all .2s ease-out 0s;
  --trans-quart: all .4s var(--cb) 0s;
  --trans-quart-io: all .3s var(--cb-io) 0s;
  --font-size: 16px;
  --font-size-s: .69420rem;
  --font-size-xs: .5236rem;
  --font-size-m: 1.2rem;
  --font-size-l: 2.1rem;
  --line: 2rem;
  --pad: .6rem;
  --padm: .4rem;
  --pad-l: calc(calc(var(--size) - 1.5rem)/2);
  --size: calc(4 * var(--font-size));
  --size-s: 1.8rem;
  --size-l: 20vh;
  
  --media-height: 50vh; /* calc(1rem * 4); */
  --media-max-height: calc(100vh - 8rem - var(--line));
  --top: 0;
}

/* @group themes */

html[data-team="dark"] 
{ 
  --color-a: 0,0,0;
  --color-b: 23,23,23;
  --color-c: 82,82,82;
  --color-d: 136,136,136;
  --color-e: 211,211,211;
  --color-f: 233,233,233;
  --color-main: 222,147, 95;
  --color-alt: 178,148,187;
  --color-no: 204,102,102;
  --color-yes: 100,200,100;
  --color-maybe: 240,198,116;
  --color-undefined: 138,190,183;
  --color-sad: 129,162,190;
}

html[data-team="light"] 
{
  --color-a: 255,255,255;
  --color-b: 233,233,233;
  --color-c: 211,211,211;
  --color-d: 136,136,136;
  --color-e: 82,82,82;
  --color-f: 23,23,23;
  --color-main: 222,147, 95;
  --color-alt: 178,148,187;
  --color-no: 204,102,102;
  --color-yes: 181,189,104;
  --color-maybe: 240,198,116;
  --color-undefined: 138,190,183;
  --color-sad: 129,162,190;
}

/* @end */

/* @group default */

::-webkit-scrollbar 
{
  height: 0px;
  width: 0px;
}

::selection
{
  background: rgba(var(--color-f), .99);
  color: rgba(var(--color-a), .99);
}

html
{
  background-color: rgb(var(--color-b));
  color: rgb(var(--color-d));
  font-family: "Source Code Pro", monospace;
  font-size: var(--font-size);
  margin: 0;
}

body 
{
  --c: var(--color-f);
  box-sizing: border-box;
  display: grid;
  grid-template-areas: 
  "header"
  "main"
  "footer";
  grid-template-rows: auto 1fr auto;
  line-height: 1;
  margin: 0;
  min-height: 100vh;
  padding-bottom: calc(var(--size)*1.2);
  width: 100%;
  -webkit-text-size-adjust: 100%;
}

.framed body 
{
  padding-bottom: 0;
}

.cli_expanded body
{
  padding-bottom: 50vh;
}

h1, h2, h3, h4, h5, h6, p, ul, ol, dl
{
  line-height: 1.5;
  margin: 0;
  margin-bottom: var(--pad);
}

h1, h2, h3, h4, h5, h6
{
  font-size: inherit;
  font-weight: normal;
}

ul, ol, dl
{
  padding-left: 0;
}

/*
::marker
{
  color: rgb(var(--color-d));
}

ul li::marker
{
  content: "· ";
}

li 
{
  list-style-position: inside;
}
*/

dl 
{
  display: grid;
  grid-gap: 0 var(--pad);
  grid-template-columns: auto 1fr;
}

dt 
{
  color: rgba(var(--color-f),.3);
  display: grid;
  grid-auto-flow: column;
  grid-gap: var(--pad);
  grid-template-areas: "key before after";
  grid-template-columns: auto 1fr;
  justify-items: start;
  margin-left: calc(var(--pad)*1.4);
  padding-right: var(--pad);
  border-bottom: 1px solid rgb(var(--color-c));
}

dt::before 
{
  content: attr(data-before);
  font-style: italic;
  grid-area: before;
}

dt::after 
{
  content: attr(data-after);
  font-style: italic;
  grid-area: after;
  opacity: .618;
}

dd 
{
  margin-left: 0;
  overflow: hidden;
  overflow-x:  scroll;
  word-break: keep-all;
}

details 
{
  box-sizing: border-box;
  margin-bottom: var(--pad);
  margin-bottom: 0;
  padding-left: 0;
  /*transition:  var(--trans-quart);*/
  width: 100%;
}

summary
{
  display: block;
  font-size: var(--font-size-s);
  transform: translateX(-1px);
  transition: var(--trans-quart);
  user-select: none;
  z-index: 1;  
}

details[open] > summary
{
  color: rgb(var(--color-main));
}

details.empty > summary
{
  pointer-events: none;
}

details > summary:hover
{
  cursor: pointer;
  color:rgb(var(--color-main));
}

details > summary::-webkit-details-marker 
{
  display: none;
}

details > summary::before 
{
  content: "";
}

details:not(.empty) > summary::after 
{
  content: " {…}";
}

details.empty > summary::after 
{
  content: " undefined";
}

details[open] > summary::after  
{
  content: ":";
}

iframe 
{
  aspect-ratio: 16/9;
  box-sizing: border-box;
  width: 100%;
  border: none;
  box-shadow: none;
  height: 100%;
}

code
{
  background: rgb(var(--color-d));
  padding: 0 .23em;
  white-space: pre-wrap;
}

a 
{
  color: inherit;
}

button 
{
  -webkit-appearance: none;
  appearance: none;
  background: none;
  border: none;
  border-radius: 0;
  box-shadow: none;
  box-sizing: border-box;
  color: inherit;
  cursor: pointer;
  font-family: inherit;
  font-size: inherit;
  line-height: inherit;
  margin: 0;
  padding: var(--padm);
  text-align: left;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

button.butt:focus
{
  color: rgb(var(--color-f));
  outline: none;
}

.butt.yolo 
{
  color: rgb(var(--color-main));
}
.butt.yolo:focus
{
  background-color: rgb(var(--color-main));
}


.butt.sign,
.butt.post,
.butt.confirm,
.butt.yes
{
  color: rgb(var(--color-yes));
}
.butt.sign:focus,
.butt.post:focus,
.butt.confirm:focus,
.butt.yes:focus
{
  background-color: rgb(var(--color-yes));
}

.butt.cancel,
.butt.no 
{
  color: rgb(var(--color-no));
}
.butt.cancel:focus,
.butt.no:focus
{
  background-color: rgb(var(--color-no));
}

.butt.edit 
{
  color: rgb(var(--color-maybe));
}
.butt.edit:focus
{
  background-color: rgb(var(--color-maybe));
}

@keyframes foo-in 
{
  0% { opacity: 0 }
  100% { opacity: 1 }
}

@keyframes clk 
{
  0% { opacity: 0 }
  100% { opacity: 1 }
}

.clkd
{
  animation: clk 1s var(--cb) 0s 1 normal!important;
}

/* @end */

/* @group list */

.list 
{  
  list-style-type: none;
  margin: 0;
  padding: 0;
  position: relative;
  transition: var(--trans-quart);
}

.list.empty::after 
{
  /*content: " }";*/
}

.item 
{
  /*color: rgba(var(--color-a),.5);*/
  display: grid;
  grid-template-areas: "bef k v aft";
  grid-template-columns: auto auto 1fr auto;
  justify-items: start;
  margin: 0 var(--pad);
}

.item:hover
{
  /*color: rgba(var(--color-a),1);*/
}

.item[data-before]::before 
{
  content: attr(data-before);
  grid-area: bef;
}

.item[data-after]::after 
{
  content: attr(data-after);
  grid-area: aft;
}

.item > .key 
{
  margin-right: var(--padm);
}

.item > .key::after 
{
  content: ":";
  white-space: pre;
}

.item > .val
{
  /*color: rgb(var(--color-d));*/
}

.item > details[open] > summary
{
  /*background: var(--color);*/
  /*border-bottom: 1px solid #333;*/
}

.item button
{
  padding: 0;
}

.item button:hover,
.item .butt:hover
{
  background-color: rgb(var(--color-f));
  color: rgb(var(--color-b));
}

.item .butt
{
  background-color: unset;
}

.item .sets
{
  grid-area: aft;
}

.item .sets .butt
{
  /*background: unset;*/
  margin-left: var(--padm);
}

.item .rm 
{
  grid-area: bef;
  margin-right: var(--pad);
}

.item button.rm:hover
{
  background-color: rgb(var(--color-no));
  color: rgb(var(--color-b));
}

.item button.key 
{
  justify-self: start;
  /*padding: 0; */
}

.relay .url 
{
  grid-area: k;
  margin: 0;
  margin-right: var(--pad);
}

.url .protocol 
{
  opacity: .6;
}

.url .pathname 
{
  opacity: .6;
}

.url .hashsearch 
{
  opacity: .6;
}

.relay[data-sets]::after 
{
  content: attr(data-sets);
  grid-area: aft;
  margin-right: var(--pad);
}

#r .relay[data-sets]::after 
{
  display: none;
}

/* @end */

/* @group header */

#header
{
  align-items: center;
  display: grid;
  grid-area: header;
  grid-template-areas: 
  "caralho heading" 
  "description description";
  grid-template-columns: auto 1fr;
  margin-bottom: var(--pad);
}

.viewing #header
{
  margin-bottom: 0;
}

#caralho
{
  grid-area: caralho;
  padding: var(--pad);
  text-decoration: none;
  user-select: none;
}

#caralho:hover::before 
{
  background: rgb(var(--color-b));
  content: "|<=";
  position: absolute;
}

#state
{
  display: grid;
  font-size: 1rem;
  grid-area: heading;
  grid-gap: var(--pad);
  grid-template-areas: "before title after";
  grid-template-columns: auto auto 1fr;
  line-height: 1;
  margin: 0;
  overflow: scroll;
  padding: var(--pad) 0;
}

#state::before
{
  content: attr(data-pathname);
  opacity: .5;
}

#description
{
  grid-area: description;
  margin-bottom: var(--pad);
  margin-bottom: 0;
}

.viewing #description
{
  display: none;
}

/* @end */

/* @group view */

#view 
{
  align-self: start;
  align-items: start;
  align-content: start;
  background: rgb(var(--color-b));
  display: grid;  
  grid-area: main;
  grid-template-areas: "l" "p" "e";
  position: relative;
  z-index: 1;
}

.framed #view 
{
  padding: var(--pad);
}

#view > details
{
  padding-left: var(--pad);
  margin-bottom: var(--pad);
}

.viewing #view > details
{
  display: none;
}

#view > details > summary
{
  /*font-size: var(--font-size);*/
}

#view > details[open] > summary
{
  font-size: 0;
}

#view > details > summary::before
{
  content: "[";
  display: inline-block;
  font-size: var(--font-size-s);
}

#view > details[open] > summary::before
{
  content: "[x";
  padding-bottom: 1px;
  /*transition: var(--trans);*/
}

#view > details > summary::after
{
  content: "]";
}

#view > details[open] > summary::after
{
  content: "]";
  font-size: var(--font-size-s);
  padding-bottom: 1px;
  /*transition: var(--trans);*/
}

#view > section
{
  display: grid;
  z-index: 1;
}

#view > section.expanded
{
  padding-bottom: var(--line);
}

.viewing #view > section
{
  margin-top: 0;
}

#view > section > header 
{
  z-index: 0;
}

#view > section.expanded > header
{
  color: rgb(var(--color-c));
  position: sticky;
  top: 0;
  
  justify-self: start;
}

#view > section > header > .butt 
{
  background: rgb(var(--color-b));
  color: rgb(var(--color-alt));
  display: block;
  font-size: var(--font-size-s);
  line-height: 1.5;
  padding-top: 0;
  padding-bottom: var(--padm);
  padding-left: var(--pad);
  padding-right: var(--padm);
  text-align: left;  
}



#view > section.expanded > header:hover
{
  /*color: rgb(var(--color-alt));*/
  z-index: 2;
}

.viewing #view > section > header > .butt,
#view > section > header > .butt:not([data-count])
{
  display: none;
}

/*#view > section > .butt::before
{
  content: "//";
  font-size: var(--font-size-s);
  margin-right: var(--pad);
}*/

#view > section > header > .butt::after
{
  content: ":[" attr(data-count) "]";
}

/* @end */

/* @group u */

#u_u 
{
  align-items: center;
  align-self: end;
  bottom: 0;
  box-sizing: border-box;
  display: grid;
  grid-area: u;
  grid-auto-flow: dense;
  margin: 0;
  max-height: 100vh;
  max-width: 100vw;
  min-width: var(--size);
  overflow-y: scroll;
  padding: 0;
  padding-bottom: var(--size);
  position: fixed;
  right: 0;
  z-index: 12;
  transition: var(--trans);
}

#u_u.expanded
{
  /*background-color: rgb(var(--color-a));*/
}

.cli_expanded #u_u
{
  bottom: unset;
  top: 0;
/*  padding-bottom: 0;
  padding-top:var(--size);*/
}

#butt_u_u
{
  /*align-self: end;*/
  align-items: center;
  background-color: rgb(var(--c));
  color: rgb(var(--color-b));
  border: none;
  border-radius: 0;
  bottom: 0;
  box-sizing: border-box;
  display: grid;
  height: var(--size);
  padding: 0;
  position: fixed;
  right: 0;
  text-align: center;
  width: var(--size);
  z-index: 1;
}

#butt_u_u[data-luma="dark"]
{
  color: rgb(var(--color-f));
}

.cli_expanded #butt_u_u
{
  bottom: unset;
  top: 50;
}

#butt_u_u.has-picture
{
  font-size: 0;
}

#butt_u_u img 
{
  height: 100%;
  left: 0;
  object-fit: cover;
  object-position: 50% 80%;
  overflow: hidden;
  pointer-events: none;
  position: absolute;
  top: 0;
  transform: scale(.82);
  transition: var(--trans-quart);
  width: 100%;
  z-index: -1;
}

#u_u.expanded #butt_u_u.has-picture img
{
  transform: scale(.618);
}



#butt_u_u.has-picture:hover img 
{
  mix-blend-mode: luminosity;
}

#butt_u_u img:not([src])
{
  opacity: 0;
}

#u_u > details
{
  background-color: rgb(var(--color-b));
  display: none;
  font-size: var(--font-size-s);
  grid-column: 2;
  grid-column: 1 / 3;
  padding-bottom: var(--pad);
  padding-top: var(--padm);
}

#u_u.expanded > details
{
  display: unset;
}

#u_u > details[open]
{
  background-color: rgb(var(--color-a));
  grid-column: 1 / 3;
  grid-row: span 10;
  margin: 0;
  margin-bottom: 2px;
  padding-bottom: var(--pad);
}

#u_u > details > summary 
{
  background-color: unset;
  box-sizing: border-box;
  display: grid;
  font-size: var(--font-size);
  grid-template-columns: 1fr auto;
  line-height: 1.2;
  min-width: var(--size);
  padding: 0 var(--padm);
  text-align: center;
}

#u_u > details[open] > summary 
{
  font-size: var(--font-size);
  text-align: left;
  padding-bottom: var(--padm);
}

#u_u > details > summary::before,
#u_u > details > summary::after
{
  content: none;
}

#u_u > details[open] > summary::after
{
  content: "-";
}

#u_u .val 
{
  overflow-x: scroll;
  max-width: 100%;
}

#u_npub .nostr_link 
{
  color: rgb(var(--color-c));
  text-decoration: none;
}

#u_npub .nostr_link::after
{
  content: "";
}



/* @end */

/* @group l / logs */

#l
{
  align-self: start;
  display: none;
  /*background: none;*/
  grid-area: l;
  /*margin: 0; */
  /*max-height: 40vh;*/
  /*max-height: 100%;*/
  /*opacity: 1;*/
  
  padding: 0;
  
  position: relative;
  /*top: 0; */
  
  overflow-y: scroll;
  max-height: 60vh;
}

.cli_expanded #l
{
  display:block;
}

#l:not(.expanded) .l
{
  display: none;
}

#l.expanded
{
  margin-bottom: 1rem;
}

/*.cli_expanded #l.expanded
{
  background: rgba(var(--color-e),1);
  padding-bottom: 1rem;
  /*padding-left: var(--line);*!/
/*  box-shadow: 0 .2rem .2rem rgb(var(--color-d),.5);
  position: sticky;*!/
  /*top: var(--line);*!/
  /*z-index: 4;*!/
  
}*/

#l > header
{
  display: grid;
}

#l.expanded > header
{
  background: red;
  height: 100%;
  left: 0;
  top: 0;
  position: sticky;
  width: var(--line);
  z-index: 1;
}

#butt_l
{
  background: rgb(var(--color-e));
  color: rgb(var(--color-b));
  display: block;
  padding: var(--pad);
  text-align: center;
  
}

#logs
{
  
  /*overflow-y: scroll;*/
  /*justify-self: start;*/
}

.l
{
  /*color: rgb(var(--color-d));*/
  grid-gap: var(--pad);
  font-size: var(--font-size-s);
  
  grid-template-areas: "bef k";
  grid-template-columns: auto 1fr;
}

.l::before
{
  content: "//";
  opacity: .5;
}

.l > p 
{
  margin: 0;
  line-height: 1.5;
}

.l ul::before,
.l dl::before 
{
  display: block;
  grid-column: span 2;
  margin-right: var(--pad);
  white-space: pre;
}

.l > p > .butt
{
  color: rgb(var(--color-d));
  border-bottom: 1px dashed rgb(var(--color-d));
}

.l .butt.clkd::after
{
  content: " …nope";
}

.l article
{
  font-size: var(--font-size);
}

.l .item:hover
{
  /*color: rgb(var(--color-c));*/
  background: rgb(var(--color-f));
}

.l .item:hover .butt
{
  color: rgb(var(--color-c));
}

.l .item .butt:hover
{
  color: rgb(var(--color-a));
}

#l .relay::before
{
  content: "(" attr(data-state) ") " attr(data-q);
  margin-right: var(--pad);
}

#l .relay[data-state="1"]::before
{
  color: rgb(var(--color-yes));
  opacity: .7;
}

#l .relay[data-state="3"]::before
{
  color: rgb(var(--color-no));
  opacity: .7;
}

/* @end */

/* @group index */

/*#index 
{
  align-items:  center;
  display: grid;
  font-size: var(--font-size-s);
  justify-self: start;
  min-width: var(--line);
  position: sticky;
  top: calc(50vh - 1rem);
  z-index: 4;
}*/

/*#index::before
{
  content: "Y";
  font-size: var(--font-size-s);
  line-height: 1rem;
  text-align: center;
}*/

/*#index.expanded::before
{
  content: "X";
}

#index:hover::before
{
  cursor: pointer;
  color: rgb(var(--color-f));
}*/

/*#index.empty,
#index:not(.expanded) > *
{
  display: none!important;
}*/

/*#index > .list
{
  align-self:  center;
  align-items: start;
  background: rgb(var(--color-e));
  display: grid;
  left: var(--line);
  max-height: 80vh;
  overflow-y:  scroll;
  padding: var(--pad);
  position: absolute;
}*/

/*#index > .list > .item 
{
  grid-gap: var(--pad);
  margin-left: 0;
}

#index .list .list .key:hover,
#index .key.out
{
  color: rgb(var(--color-no));
  text-decoration: line-through;
}*/

/*#index .key::after
{
  content: none;
}

#index .list .list .val:hover,
#index .val.solo
{
  color: rgb(var(--color-maybe));
  text-decoration: underline;
}

#index .list .list .val::before
{
  content: 'x';
}*/

/*#index details
{
  align-self: start;
}

#index details.empty
{
  display: none;
}

#index details[open]
{
  margin-bottom: 0;
}*/

/*#index summary[data-after]::after
{
  content: "("attr(data-after)")";
  color: rgb(var(--color-c));
  margin-left: var(--padm);
}

#index details[open] summary[data-after]::after
{
  color: rgb(var(--color-b));
  content: ":";
  margin: 0;
}*/

/*#index details > summary
{
  background: rgb(var(--color-e));
  color: rgb(var(--color-b));
  font-size: var(--font-size);
}

#index details[open] > summary
{
  color: rgb(var(--color-a));
}

#index .key 
{
  color: rgb(var(--color-a));
  white-space: pre;
  word-break: keep-all;
}*/

/*#index .val 
{
  color: rgb(var(--color-c));
}*/

/* @end */

/* @group e / notes */

#e
{
  grid-area: e;
}

#view #butt_e
{
  z-index: 1;
}

#notes
{
  padding-left: var(--pad-l);
  /*padding-left: calc(var(--pad)*2);*/
}

#notes > .note
{
  /*display: none!important;*/
}

#notes > .note:nth-child(-n+100)
{
  /*display: grid!important;*/
}

.view_e #notes
{
  padding-left: 0;
}

#e:not(.expanded) .note:not(.in_path),
.view_e .note:not(.in_path),
.view_p .note:not(.in_path)
{
  display: none;
}

#e:not(.expanded) .note.in_view .note
{
  display: grid;
}

.note
{
  /*background: rgba(var(--c),.1);*/
  box-sizing: border-box;
  border-left: 1px dotted rgba(var(--c),1);
  border-top: 1px dotted rgba(var(--c),1);
  cursor: auto;
  display: grid;
  grid-template-areas: 
  "by by"
  "content content"
  "tags tags"
  "after after"
  "replies replies"
  "sig sig"
  ;
  grid-template-columns: 1fr auto;
  grid-template-rows: auto 1fr auto;
  align-self: stretch;
  margin: var(--pad) 0;
  /*margin-bottom: var(--pad);*/
  position: relative;
  --who: attr(data-who);
  z-index: 1;
}

.note.root:not(.in_path),
.note.in_view > .replies > .note,
#notes > .note:not(.root):not(.in_path)
{
  /*border-color: rgb(var(--color-d));*/
  grid-template-columns: 38.2vw 1fr;
  grid-template-areas: 
  "by      by"
  "content replies"
  "tags    replies"
  "actions replies"
  "sig     sig"
  "after   after"
  ;
}

.note.root:not(.in_path),
.note.in_view > .replies > .note
{
  margin: 0;
  margin-bottom: var(--line);
}

.note.reply:nth-child(2)
{
  margin-top: 0;
}

.note.reply:last-child
{
  margin-bottom: 0;
}

/*.note.draft
{
  grid-template-columns: 38.2vw 1fr;
  grid-template-areas: 
  "by      by"
  "content content"
  "tags    tags"
  "actions actions"
  "replies replies"
  "sig     sig"
  "after   after"
  !important;
}*/

/*.note.in_path.in_view,*/
.note:hover
{
  background: rgba(var(--c),.06);
  /*border-color: rgb(var(--color-e));*/
  /*transition: var(--trans-fast);*/
}

.note.in_path.in_view
{
  background: rgb(var(--color-b));
  border-color: rgb(var(--color-e));
  grid-template-areas: 
  "by by"
  "content content"
  "sig sig"
  "after after"
  "tags tags"
  "replies replies"
  ;
}

.haz_solo .note:not(.in_path),
.note.out 
{
  border: none;
  margin: 0;
  padding-bottom: 0;
}

.note.out:hover
{
  border-top: 1px dotted rgba(var(--c),1);
}

.haz_solo .note:not(.in_path) > .by,
.haz_solo .note:not(.in_path) > .content,
.haz_solo .note:not(.in_path) > .details,
.haz_solo .note:not(.in_path) > .sig,
.haz_solo .note:not(.in_path) > .replies::after,
.note.out > .by,
.note.out > .content,
.note.out > .details,
.note.out > .sig,
.note.out > .replies::after,
.note:not(.in_view) > .sig,
.hide_e #e .note:not(.in_path),
.view_e .note:not(.in_path)
{
  display: none;
}

.view_e .note.in_view .note
{
  display: grid;
}

.haz_solo .note:not(.in_path) > .replies
{
  margin: 0;
}

#notes .root.note.not_yet > .content
{
  /*position: absolute;*/
  /*display: none;*/
}

@keyframes rendered 
{
  0% 
  { 
    opacity: 0;
    height: 0;
    transform: scaleY(0);
    transform-origin: top;
  }
  100%
  { 
    opacity: 1;
    height: unset;
    transform: scaleY(1);
    transform-origin: top;
  }
}

.note.rendered:not(.not_yet) > .replies
{
  /*animation: rendered .4s ease-out 0s 1 forwards normal;*/
}

.note:hover::before
{
  color: rgba(var(--color-f));
}

.sig 
{
  background: rgb(var(--color-b));
  color: rgb(var(--color-c));
  font-size: var(--font-size-xs);
  grid-area: sig;
  margin-bottom: 0;
  overflow-x: hidden;
  overflow-x: scroll;
  padding: var(--pad) var(--pad) 0 var(--pad);
  text-align: center;
}

.note::before
{
  background: rgb(var(--color-b));
  content: "kind-" attr(data-kind) " " attr(data-seen) " - " attr(data-subs);
  font-size: var(--font-size-xs);
  grid-area: after;
  padding: 1rem var(--padm);
  padding-bottom: 0;
  z-index: 3;
}

.note.in_path:not(.in_view)::before
{
  display: none;
}

.note.in_path.in_view::before
{
/*  content: "kind-" attr(data-kind) " " attr(data-seen) " - " attr(data-subs);*/
  display: block;
  padding: var(--padm);
  text-align: center;
}

/* @end */

/* @group by */

.by
{
  align-self: center;
  align-content: center;
  background: rgb(var(--color-b));
  color: rgb(var(--c));
  display: grid;
  font-size: var(--font-size-s);
  grid-area: by;
  grid-template-areas: "author id created_at clas";
  grid-template-columns: auto 1fr auto;
  line-height: 1rem;
  z-index: 2;
}

.replies > .note:not(.in_path) > .by
{
  position: sticky;
  top: calc(var(--line) + var(--padm));
}

.in_view .replies .note .by
{
  top: calc(var(--line) + var(--line) + var(--pad));
}

.in_view > .replies > .note > .by
{
  top: calc(var(--line) + var(--line) - var(--padm));
  z-index: 3;
}



.in_view > .by
{
  grid-template-areas: 
  "id id id"
  "author created_at clas";
}

.note.root:not(.in_view):not(.in_path) > .by,
.note.in_view > .by
{
  position: sticky;
  top: 0;
  z-index: 10;
}

.note.draft .by::after,
.note.not_sent .by::after
{
  color: rgb(var(--color-main));
  grid-area: clas;
  padding: 0 var(--padm);
}

.note.draft .by::after
{
  content: 'draft';
}

.note.not_sent .by::after
{
  content: 'not_sent';
}

.by .id 
{
  box-sizing: border-box;
  display: grid;
  grid-area: id;
  grid-template-areas: "nid";
  line-height: 1rem;
  margin: 0;
  padding: 0 var(--padm);
  word-break: keep-all;
}

.by .id:hover
{
  background-color: rgb(var(--c));
}

.in_view > .by .id
{
  background-color: rgb(var(--c));
  grid-template-areas: "nid xid";
  grid-template-columns: 1fr auto;
  padding: 0;
}

.nid
{
  align-items: center;
  color: rgb(var(--color-d));
  display: grid;
  grid-area: nid;
  grid-template-columns: 1fr 1fr;
  line-height: 1;
  text-align: right;
  text-decoration: none;
  white-space: pre;
  word-break: keep-all;
  user-select: none;
}

.in_view > .by .nid
{
  font-size: 0;
}

.note[data-luma="light"].in_view > .by .id .nid
{
  color: rgb(var(--color-e));
}

.note[data-luma="dark"].in_view > .by .id .nid
{
  color: rgb(var(--color-b));
}

.note[data-luma="light"] > .by .nid:hover
{
  color: rgb(var(--color-a));
}

.note[data-luma="dark"] > .by .nid:hover
{
  color: rgb(var(--color-f));
}

.nid::before
{
  content: "   ";
  font-size: var(--font-size-s);
  grid-column: 1;
}

.in_view > .by .nid:hover
{
  background-color: rgb(var(--color-f));
  color: rgb(var(--color-b));
}

.nid:hover::before
{
  content: "-->";
  text-align: left;
}

.in_view > .by .nid:hover::before
{
  content: " <--";
}

.by .xid
{
  background: rgb(var(--color-b));
  color: rgb(var(--color-e));
  display: none;
  font-size: var(--font-size-s);
  grid-area: xid;
  text-align: center;
}

.in_view > .by .xid
{
  color: rgb(var(--color-d))!important;
  display: block;
  justify-self: end;
  padding: 0 var(--padm);
}



.created_at 
{
  color: rgb(var(--color-c));
  grid-area: created_at;
  justify-self: end;
  line-height: 1.5;
  padding: 0 var(--padm);
  padding-left: 0;
  white-space: pre;
  word-break: keep-all;
}

.note:not(.in_view) > .by .created_at
{
  color: rgb(var(--color-d));
  font-size: 0;
  padding-left: 0;
}

.created_at::after 
{
  color: rgb(var(--color-d));
  content: "~" attr(title);
  cursor: pointer!important;
  font-size: var(--font-size-s);
}

.in_view > .by .created_at::after 
{
  margin-left: var(--pad);
}

.created_at:hover::after,
.created_at:hover 
{
  color: rgb(var(--color-e));
}

/* @end */

/* @group a.author */

a.author 
{
  color: rgb(var(--color-d));
  overflow-x: scroll;
  text-decoration: none;
}

.by .author
{
  grid-area: author;
}

.in_view > .by .author
{
  color: rgb(var(--color-d));
}

.a.author.has-picture img 
{
  background: rgb(var(--c));
  display: block;
  grid-area: before;
  height: calc(1rem); 
  object-fit: cover;
  padding: 0;
  width: calc(1rem); 
}

.author:not(.has-picture)::before
{
  background: rgb(var(--c));
  content: "";
  height: 1rem;
  width: 1rem;  
}

.note_quote_by .author::after,
.by .author::after,
.pubkey .author::after
{
  
  
  color: rgb(var(--color-c));
  content: attr(data-followers);
  grid-area: after;
  /*padding: 0 var(--padm);*/
  /*padding: var(--padm);*/
  word-break: keep-all;
  white-space: pre;
}
.note_quote_by .author:hover::after,
.by .author:hover::after,
.pubkey .author:hover::after
{
  color: rgb(var(--color-d));
}
.pubkey .author::after
{
  background: rgb(var(--color-a));
  padding: var(--padm);
}

.note_quote_by .author.is_mf::after,
.pubkey .author.is_mf::after,
.by .author.is_mf::after
{
  color: rgb(var(--color-no));
}

.note_quote_by .author.is_u::after,
.pubkey .author.is_u::after,
.by .author.is_u::after
{
  color: rgb(var(--color-yes));
}


.author .name 
{
  background-color: rgb(var(--color-b));
  padding: 0 var(--padm);
}

.author .name.empty
{
}

.author .name.empty::before
{
  content: attr(title)!important;
}

.author .name[data-petname]::after 
{
  align-self: center;
  color: rgb(var(--color-c));
  content: "(" attr(data-petname) ")";
  font-size: var(--font-size-s);
  margin-left: var(--pad);
}

.author:hover .name[data-petname]::after 
{
  color: rgb(var(--color-d));
}

.paragraph > a.author
{
  
  border-bottom: 1px solid rgb(var(--c));
  line-height:1;
  grid-area: unset;
  /*margin-right: var(--pad);*/
}

.paragraph > a.author .name
{
  /*color: rgb(var(--color-e));*/
  padding: 2px 0;
  margin: 0;
  /*display: none;*/
}

.paragraph > a.author .name:not(.empty)::after
{
  display: none;
}

.paragraph > a.author:not(.has-picture)::before,
.paragraph > a.author .picture
{
  display: none;
}

/* @end */

/* @group content */

.content 
{
  align-self: start;
  background: rgb(var(--color-b));
  border-left: none;
  
  box-sizing: border-box;
  grid-area: content;
  max-height: calc(100vh - 8rem);  
  overflow: hidden;
  /*padding-top: var(--pad);*/
  /*padding-left: 5px;*/
  padding-bottom: var(--padm);
  position: relative;
}

.note .content
{
  border-top: var(--padm) solid rgb(var(--color-b));
  /*border-bottom: var(--padm) solid rgb(var(--color-b));*/
}

.note.draft > .content
{
  max-height: unset;
}

.in_view > .content
{
  display: grid;
  justify-content: center;
  max-height: unset;
  padding-top: var(--line);
  padding-bottom: var(--line);
}

.note.in_view > .replies > .note > .content,
.root:not(.in_view):not(.in_path) > .content
{
  margin-bottom: 2rem;
  position: sticky;
  top: 1rem;
  z-index: 2;
}

.note.in_view > .replies > .note > .content
{
  top: calc(var(--line) + var(--line) + var(--padm));
}

.paragraph
{ 
  
  hyphens: auto;
  line-height: 1;
  margin-bottom: 0;
  padding: 0 var(--pad);
  padding-top: 0;
  white-space: pre-wrap;
  word-break: break-word;
  /*transition: var(--trans);*/
}

.content .paragraph
{
  /*background: rgb(var(--color-b));*/
  padding: var(--pad);
  line-height: 1.5;
}

.parsed > .paragraph,
.decrypted > .paragraph
{
  
  /*background: rgb(var(--color-b));*/
  padding: var(--pad);
}

.in_view > .content > .paragraph
{
  justify-self: stretch;
  line-height: calc(var(--font-size-m)*1.5);
  font-size: var(--font-size-m);
  max-width: 80vw;
}

.view_e .note.in_path:not(.in_view) > .content .paragraph
{
  font-size: var(--font-size-s);
  line-height: 1.5;
  /*padding: var(--padm);*/
}

.view_e .note.in_path:not(.in_view) > .content .content-img,
.view_e .note.in_path:not(.in_view) > .content .content-video
{
  max-height: var(--size);
}

.content:hover > .paragraph,
.in_view > .content > .paragraph
{
  color: rgb(var(--color-e)); 
}

/*.note[data-kind="1"]:not(.in_view) > .content > .paragraph:last-child::after*/
/*.note:not(.tiny):not(.in_path) > .content::after
{
  background: rgb(var(--color-b));
  color: rgb(var(--color-b));
  content: ".";
  display: block;
  line-height: 1.5;
  /*margin-left: var(--pad);*!/
}*/

.content-img,
.content-video
{
  display: block;
  height: auto;
  padding: var(--pad) 0;
  max-width: 100%;
  max-height: var(--media-height);
}

.in_view > .content .content-img
{
  max-height: var(--media-max-height);
  margin: var(--line) auto;
  justify-self: center;
}

.in_view > .content .note_quote .content-img
{
  max-height: var(--media-height);
  margin: 0 auto;
  justify-self: center;
}



.content .content_link
{
  color: rgba(var(--color-sad),.6);
  margin-right: var(--padm);
}

.content .content_link:hover
{
  color: rgba(var(--color-sad),1);
}

.content .nostr_link
{
  color: rgb(var(--color-alt));
}

.content .nostr_link
{
  color: rgba(var(--color-alt),.6);
}

.content .nostr_link:hover
{
  color: rgba(var(--color-alt),1);
}

.content .nostr_link::before
{
  color: rgb(var(--color-c));
  content: "#";
}

.content .nostr_link::after
{
  color: rgb(var(--color-c));
  content: "…";
}

.content .paragraph.cypher
{
  color: rgb(var(--color-c));
  font-size: var(--font-size-xs);
  /*margin-bottom: var(--pad);*/
}

.butt.decrypt
{
  color: rgb(var(--color-yes));
}

.note:not(.tiny) > .content .paragraph:last-child
{
  /*margin-bottom: var(--padm);*/
  /*border-bottom: 1px dotted rgba(var(--color-c),.6);*/
}

/* @end */

/* @group av */

.av 
{
  color: rgb(var(--c-a-e));
  display: grid;
  grid-template-rows: 1fr auto;
  grid-template-areas: "av";
  margin: 1rem 0;
  padding-top: 1.5rem;
  position: relative;
}

.av video 
{
  background: black;
  cursor: pointer;
  grid-area: av;
  margin: 0;
  opacity: .5;
}

.av video:hover 
{
  opacity: 1;
}

.av video.playin 
{
  opacity: 1;
  z-index: 1;
}

.av .controls 
{
  align-self: start;
  cursor: pointer;
  display: grid;
  grid-area: av;
  grid-template-columns: 1fr auto;
  grid-template-areas: 
  "progress progress progress progress"
  "before rewind mute sticky"
  "url url url url";
  line-height: 2;
  
  text-align: right;
  transform: translateY(-2rem);
}

.av .controls:hover 
{
  z-index: 2;
}

.av .controls::before 
{
  content: "<video " attr(data-duration) "s";
  grid-area: before;
  white-space: pre;
}

.av video:hover + .controls::before 
{
  content: "<play " attr(data-duration) "s";
}

.av .started + .controls::before 
{
  content: "<video " attr(data-remains) "s";
}

.av video.started:hover + .controls::before 
{
  content: "<play " attr(data-remains) "s";
}

.av video.started.playin + .controls::before,
.av video.started.playin:hover + .controls::before 
{
  content: "<pause " attr(data-remains) "s";
}

.av .controls button
{
  padding: 0;
  margin-left: 1rem;
}

.av .muted + .controls .mute::before
{
  content: "un";
}

.av .url 
{
  width: 100%;
  grid-area: url;
  word-break: break-all;
  justify-self: start;
  mix-blend-mode: color-dodge;
  top: 0rem;
  box-sizing: border-box;
  cursor: text;
  mix-blend-mode: color-dodge;
}

.av .controls progress 
{
  
  grid-area: progress;
  pointer-events: none;
  width: 100%;
}

.av .controls progress[value] 
{
  -webkit-appearance: none;
  -moz-appearance: none;
  appearance: none;
  height: 1px;
  margin: 0;
  width: 100%;
}

.av .controls progress[value]::-webkit-progress-bar 
{
  background-color: rgb(var(--color-a));
}

.av .controls progress[value]::-webkit-progress-value 
{
  background-color: rgb(var(--color-main));
}



.note:not(.in_view) .av video.playin
{

}

.av .url,
.av .controls 
{
  color: rgb(var(--color-d));
}

.av .controls button:hover
{
  color: rgb(var(--color-e));
}

/* @end */

/* @group replies */

.replies
{
  border-left: none;
  grid-area: replies;
  padding-left: var(--padm);
  /*padding-bottom: var(--pad);*/
  /*margin-bottom: 8px;*/
}

.in_path:not(.in_view) > .replies
{
  padding-left: 0;
}

.note:not(.haz_reply) > .replies[open]
{
  padding-bottom: 0;
}

.note .replies > summary
{
  background-color: rgb(var(--color-b));
  color: rgb(var(--color-d));
  display: grid;
  display: none;
  grid-auto-flow: column;
  grid-template-columns: auto 1fr;
  /*float: right;*/
  /*font-size: var(--font-size);*/
  /*justify-items: end;*/
  line-height: 1.5rem;
  /*margin-left: 5.9rem;*/
  margin-right: 5.9rem;
  margin-bottom: 2px;
  /*padding: 0 var(--padm);*/
  z-index: 5; 
}

.note.in_path:not(.in_view) > .replies[open] > summary
{
  display: none;
}

.note.root:not(.in_view) > .replies > summary
{
  position: sticky;
  top: 1rem;
}

.note.in_view > .replies > summary
{
  border-bottom: 1px dashed rgb(var(--color-d));
  /*display: inline-grid;*/
  width: auto;
}

.in_view > .replies > summary .mark_read
{
  color: rgb(var(--color-d));
}

.note.in_view > .replies[open] > summary
{
  position: sticky;
  top: var(--line);
  /*display: inline-grid;*/
  /*margin: 0 auto;*/
}
.note.in_view > .replies[open] > summary
{
  /*display: inline-grid;*/
}

.note .replies[open] > summary
{
  color: rgb(var(--color-d));
  /*background-color: rgb(var(--color-b));*/
}

.note .replies > summary:hover
{
  background-color: rgb(var(--color-b));
}

.note .replies > summary:hover:after
{
  font-size: var(--font-size);
}

.haz_reply > .replies > summary
{
  display: grid;
}

.note .replies > summary::after
{
  content: "+";
  margin: 0 var(--pad);
}

.note .replies[open] > summary::after
{
  content: "-";
}

.replies.expanded > summary .mark_read
{
  
}

.replies:not(.expanded) .note:not(.is_new):not(.haz_new_reply)
{
  margin: 0;
}

.replies:not(.expanded) .note:not(.is_new):not(.haz_new_reply) > .replies
{
  padding-left: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.root.not_yet > .replies > .note,
.replies:not(.expanded) .note:not(.is_new):not(.haz_new_reply) > .content,
.replies:not(.expanded) .note:not(.is_new):not(.haz_new_reply) > .by,
.replies:not(.expanded) .note:not(.is_new) > .actions,
.replies:not(.expanded) .note:not(.is_new):not(.haz_new_reply) > .replies > summary,
.replies:not(.expanded) .note:not(.is_new):not(.haz_new_reply)::before,
.replies:not(.expanded) .note:not(.is_new):not(.haz_new_reply)::after
{
  display: none;
}

.replies:not(.expanded) .note:not(.is_new).haz_new_reply > .content .paragraph
{
  font-size: var(--font-size-s);
  line-height: 1rem;
}

.mark_read
{
  color: rgb(var(--color-c));
  padding: 0;
  padding-left: var(--padm);
  text-align: right;
}

.mark_read:hover
{
  background-color: rgba(var(--color-no),1);
  color: rgb(var(--color-b));
  text-align: left;
}

.mark_read:hover::after
{
  content: " mark read";
}

.replies:not(.expanded) > summary .mark_read
{
  color: rgb(var(--color-no));
  text-align: left
}

.replies:not(.expanded) > summary .mark_read:hover
{
  /*color: rgb(var(--color-b));*/
}

.replies.expanded > summary .mark_read::before
{
  content: "// ";  
}

.replies:not(.expanded) > summary .mark_read::before
{
  content: "/* ";  
}
.replies:not(.expanded) > summary .mark_read::after
{
  content: " read */";  
}

.in_view > .replies > summary .mark_read
{
  text-align: left;
}

/* @end */

/* @group note actions */

.note > .actions 
{
  align-self: start;
  /*background: rgba(var(--color-b),.5);*/
  display: grid;
  /*font-size: var(--font-size-s);*/
  grid-area: replies;
  grid-auto-flow: column;
  grid-gap: 0;
  /*justify-content: end;*/
  /*justify-items: end;*/
  justify-self: end;
  line-height: 1.5;
  margin: 0;
  margin-bottom: 2px;
  /*margin-top: var(--padm);*/
  padding: 0;
  /*padding-left: 5px;*/
  /*padding-bottom: var(--padm);*/
  z-index: 3;
}

.note > .actions:hover
{
  /*background: rgb(var(--color-b));*/
}

.note.root:not(.in_path) > .actions ,
.note.in_view > .replies > .note > .actions ,
#notes > .note:not(.root):not(.in_path) > .actions 
{
  /*grid-area: actions;*/
}

.in_view > .replies > .note > .actions,
.root:not(.in_path) > .actions
{
  /*bottom: 4rem;*/
  /*justify-self: start;*/
  position: sticky;
  top: 1rem;
}

note.in_view > .actions
{
  /*align-self: stretch;*/
  border-bottom: 1px dashed rgb(var(--color-d));
  /*bottom: unset;*/
  color: rgb(var(--color-d));
  /*grid-area: actions;*/
  /*position: relative;*/
  position: sticky;
  top: var(--line);
}

.note.in_path:not(.in_view) > .actions
{
  display: none;
}

.butt
{
  background: rgba(var(--color-b),1);
  color: rgba(var(--color-d),.5);
  padding: 0 var(--padm);
}

.butt:hover 
{
  background: rgb(var(--color-b));
  color: rgb(var(--color-e));
}

.in_view > .actions .butt
{
  color: rgb(var(--color-d));
}

/* @end */

/* @group tags */

.details
{
  /*background: rgba(var(--color-b),.8);*/
  /*box-shadow: 0px -.2rem var(--padm) rgba(var(--color-b),1);*/
  grid-area: tags;
  position: sticky;
  bottom: 4rem;
  margin-top: 2px;
  /*margin: 2px 0;*/
  /*bottom: 0;*/
  z-index: 3;
}

.details:hover,
.details[open]
{
  background: rgb(var(--color-b));
  /*z-index: 3;*/
}

.note:not(.in_view):not(.draft):not(.root) > .details,
.note.in_path:not(.in_view) > .details
{
  display: none;
}

.in_view > .details
{
  /*display: inline;*/
  position: relative;
  bottom: 0;
  /*margin: 0 auto;*/
}

.in_view > .details summary
{
  text-align: center;
}

.in_view > .details .tags
{
  justify-content: center;
}

.details summary
{
  color: rgb(var(--color-d));
  padding: var(--pad);
}

.tags 
{
  display: grid;
  font-size: var(--font-size-s);
  list-style: none;
  margin: 0;
  margin: 0 auto;
  /*padding: 0 var(--pad);*/
  padding-bottom: var(--pad);
}

/*#tags 
{
  counter-reset: tags -1;
  cursor: pointer;
  list-style-type: none;
}

#tags li.required 
{
  color: rgb(var(--color-maybe));
  cursor: not-allowed;
  pointer-events: none;
}

#tags li:hover 
{
  text-decoration: line-through;
}

#tags li::before 
{
  content: "#[" counter(tags) "]";
  counter-increment: tags;
  margin-right: var(--pad);
}

#tags li[data-name]::after 
{
  content: "(" attr(data-name) ")";
  margin-left: var(--pad);
}*/

.tag
{
  display: grid;
  grid-auto-flow: column;
  grid-gap: var(--pad);
  grid-template-columns: 3.15em 1fr auto;
  overflow-x: scroll;
  white-space: pre;
}

.tag:hover 
{
  color: rgb(var(--color-f));
}

.tag_p
{
  /*color: rgb(var(--c));*/
}

.tag button
{
  color: rgb(var(--color-c));
  justify-self:end;
  padding: 0;
}

.tag button::before
{
  content: "[";
}

.tag button::after
{
  content: "]";
}

.tag button:hover
{
  color: rgb(var(--color-main));
}

.a 
{
  display: inline-grid;
  font-size: inherit;
  grid-template-areas: "before and after";
  grid-template-columns: auto 1fr auto;
}

.a:hover 
{
  color: rgb(var(--color-f));
}

.a span
{
  grid-area: and;
  display: grid;
  grid-auto-flow: column;
  pointer-events: none;
  white-space: pre;
  word-break: keep-all;
}

.a:hover span 
{
  color: rgba(var(--color-f),1);
}

/* @end */

/* @group blank */

.note.blank
{
  --c: var(--color-c)!important;
  border-left: 1px dashed rgba(var(--color-c), 1);
  border-top: 1px dashed rgba(var(--color-c),1);
}

.note.blank::after
{
  content: "nope: " attr(data-nope);
  font-size: var(--font-size-s);
  line-height: 1.5;
  padding: var(--pad);
  white-space: pre-wrap;
}

.note.blank > .by::before
{
  content: "??";
  font-size: var(--font-size-s);
  grid-area: author;
  padding-left: var(--padm);
}

.blank > .by .created_at
{
  display: none;
}

.blank > .content
{
  font-size: var(--font-size-s);
}

.blank > .content .paragraph
{
  line-height: 1.5;
  margin: 0;
}

/* @end */

/* @group quote */

.note_quote
{
  background: rgba(var(--color-c),.2);
  background-color: rgb(var(--color-b));
  border: 1px dashed rgba(var(--color-c),1);
  
  display: grid;
  margin: var(--pad);
  margin-bottom: var(--line);
  /*margin: 0;*/
  max-height: var(--media-height);
  max-width: 960px;
  overflow: hidden;
  /*padding: var(--pad);*/
  position: relative;
}

.note_quote:hover
{
  /*border: 1px dashed rgba(var(--color-d),1);*/
  /*box-shadow: 0px .2rem var(--padm) rgba(var(--c),1);*/
}

.note.in_view .note_quote
{
  margin: var(--line);
  max-height: unset;
}

.note_quote_by
{
  background: rgb(var(--color-b));
  display: grid;
  font-size: var(--font-size-s);
  grid-area: unset;
  grid-template-areas: "author . id";
  grid-template-columns: auto 1fr auto;
  line-height: 1rem;
}

.note_quote_by .author .name
{
  background: none;
}

.note_quote_by .nostr_link
{
  justify-self: end;
  margin: 0;
}

.note_quote > .paragraph
{
  font-size: var(--font-size-s);
  line-height: 1.5;
  padding: 0 var(--padm);
  padding: var(--padm);
}

.note_quote > .paragraph > .content-img
{
  max-height: var(--size-l);
}

/* @end */

/* @group cli */

#cli
{
  background: rgb(var(--color-b));
  bottom: 0;
  box-shadow: 0px -1rem 2rem 0 rgb(var(--color-b));
  display: grid;
  
  grid-template-areas: 
  "hide"
  "l"
  "oto"
  "is";
  left: 0;
  max-height: 4rem;
  overflow: hidden;
  position: fixed;
  top: auto;
  width: 100vw;
  z-index: 9;
}

.cli_expanded #cli
{
  background: rgb(var(--color-e));
  grid-template-rows: auto minmax(1fr,60vh) auto minmax(1fr,40vh);
  /*box-shadow: 0px -.1rem 1rem 0 rgba(var(--color-e),.5);*/
  max-height: 100vh;
  z-index: 11;
}

#cli_collapse
{
  align-self: stretch;
  background: rgb(var(--color-a));
  border-radius: 0;
  border: none;
  color: rgb(var(--color-f));
  cursor: pointer;
  display:  none;
  font-family: inherit;
  font-size: var(--font-size);
  grid-area: hide;
  justify-self: stretch;
  line-height: 1.5rem;
  padding: 0;
  text-align: center;
  transition: var(--trans-quart);
}

#cli_collapse:hover 
{
  background: rgb(var(--color-no));
}

.cli_expanded #cli_collapse
{
  display: block;
}


#cli_t
{
  align-self: stretch;
  background: none;
  /*background: rgb(var(--color-b));*/
  border: none;
  border-radius: 0;
  box-sizing: border-box;
  display: block;
  color: rgb(var(--color-c));
  font-family: inherit;
  font-size: 16px;
  grid-area: is;
  -webkit-line-break: normal;
  line-height: 1.5rem;
  margin: 0;
  max-height: 40vh;
  overflow-y: scroll;
  /*opacity: .5;*/
  outline: none;
  padding: var(--pad-l);
  position: relative;
  resize: none;
  /*transition: var(--trans-quart);*/
  white-space: pre-wrap;
}
#cli_t:focus
{
  font-size: 16px;
}

#cli_t:hover 
{
  /*opacity: 1;*/
}

.cli_expanded #cli_t
{
  background: rgb(var(--color-e));
  color: rgb(var(--color-a));
  /*max-height: 40vh;*/
  /*opacity: 1;*/
  padding: var(--line);
  
}

#cli_t::placeholder 
{
  color: inherit;
  opacity: 1;
}

.cli_expanded #cli_t::placeholder
{
  opacity: .3;
}

/* @end */

/* @group oto */

#oto 
{
  align-self: end;
  background: rgb(var(--color-e));
  display: none;
  grid-area: oto;
  overflow: hidden;
  overflow-y: scroll;
  max-height: 50vh;
  padding-left: var(--line);
}

.cli_expanded #cli #oto
{
  display: grid;
}

#oto::before 
{
  border-bottom: 1px dotted rgb(var(--color-c));
  color: rgb(var(--color-a));
  content: attr(data-s);
  left: var(--line);
  pointer-events: none;
  position: absolute;
  white-space: pre;
  z-index: 1;
}

#oto .item 
{
  cursor: pointer;
  grid-gap: var(--pad);
  grid-template-columns: auto auto auto auto 1fr;
  grid-template-areas: "bef val required optional description";
  margin: 0;
  transition: var(--trans-quart);
  user-select: none;
  word-break: keep-all;
  white-space: pre;
  overflow-x: scroll;
}

#oto .item:focus
{
  background-color: rgba(var(--color-main),.4);
  color: rgb(var(--color-c));
  outline: none;
}

#oto .item:hover,
#oto .item.mention:hover
{
  background-color: rgb(var(--color-f));
  z-index: 2;
}

#oto .item > *
{
  pointer-events: none;
  border-bottom: 1px solid rgba(var(--color-c),0);
}

#oto .item::before 
{
  color: rgb(var(--color-c));
  /*opacity: .69;*/
}

#oto .item::after 
{
  content: none;
}

#oto .item .val 
{
  color: rgb(var(--color-c));
  grid-area: val;
}

#oto .item.mention
{
  background: rgb(var(--color-e));
  z-index: 2;
}

#oto .item.mention:focus
{
  background: rgb(var(--color-a));
}

#oto .item.mention:focus::before,
#oto .item.mention:focus *
{
  color: rgb(var(--color-f));
}

#oto .item.mention .val
{
  align-self: center;
  /*font-size: var(--font-size-s);*/
  margin: 0 var(--pad);
  /*opacity: .5;*/
}

#oto .item .required 
{
  border-bottom: 1px solid rgb(var(--color-c));
  color: rgb(var(--color-c));
  grid-area: required;
}

#oto .item .optional 
{
  color: rgb(var(--color-c));
  border-bottom: 1px dashed rgb(var(--color-c));
  grid-area: required;
}

#oto .item .required + .optional 
{
  grid-area: optional;
}

#oto .item .description 
{
  align-self: center;
  color: rgb(var(--color-c));
  font-size: var(--font-size-s);
  grid-area: description;
  justify-self: end;
  padding-right: var(--pad);
}

#oto .item.pinned 
{
  background-color: rgb(var(--color-main));
  cursor: text;
  z-index: 1;
}

#oto .item.pinned > *,
#oto .item.pinned > .required,
#oto .item.pinned::before
{
  color: rgb(var(--color-b));
}

#oto .item.pinned > .description,
#oto .item.pinned > .optional
{
  color: rgb(var(--color-b));
}

#oto .item .acts
{
  pointer-events: auto;
  border-bottom: 1px solid rgba(var(--color-c),0);
}

#oto .item .acts .butt
{
  background: unset;
  color: rgb(var(--color-d));
  margin-right: var(--pad);
}

#oto .item .acts .butt:hover
{
  color: rgb(var(--color-b));
}

/* @end */

/* @group p / authors */

#p
{
  grid-area: p;
}

#butt_p
{
  z-index: 4;
}

#authors
{
  padding-left: var(--pad-l);
  /*position: relative;*/
}

.view_p #authors
{
  padding-left: 0;
}

#index_p,
.view_e #authors,
#p:not(.expanded) .profile:not(.in_view),
.view_p .profile:not(.in_view)
{
  display: none;
}

.profile 
{
  align-items: end;
  background: linear-gradient(to left, rgb(var(--color-a)) 0%, rgb(var(--c)) 100%);
  border-bottom: var(--pad) solid rgb(var(--color-b));
  display: grid;
  grid-template-areas: 
  "pub actions";
  grid-template-columns: 1fr auto;
  padding-bottom: 1px;
  grid-template-rows: auto 1fr auto;
  /*position: relative;*/
  z-index: 0;
}

.profile.in_view 
{
  grid-template-areas: 
  "pub actions"
  "metadata metadata"
  "extradata extradata";
  
  margin-bottom: calc(var(--line) + calc(var(--pad)*2));
}

.profile .pubkey
{
  align-items: center;
  color: rgb(var(--c));
  display: grid;
  font-size: var(--font-size-s);
  grid-area: pub;
  grid-template-areas: "author xpub created_at";
  grid-template-columns: 1fr auto;
  justify-items: end;
  justify-self: stretch;
  line-height: 1;
  margin: 0;
  padding-right: var(--pad);
  position: relative;
}

.profile.in_view .pubkey
{
  background: rgb(var(--color-b));
  color: rgb(var(--color-d));
  font-size: var(--font-size-s);
  grid-template-areas: "author xpub created_at";
  /*grid-template-columns: 1fr auto;*/
  padding: var(--padm);
  padding: 0;
  position: sticky;
  top: 0;
  z-index: 3;
}

.profile .score
{
/*  box-sizing: border-box;
  color: rgb(var(--color-d));
  display: none;
  /*grid-area: trust;*!/
  font-size: var(--font-size-s);
  height: var(--size-s);
  /*position: absolute;*!/
  text-align: center;
  width: var(--line);*/
}

.profile.in_view .score
{
/*  border: 1px dashed rgb(var(--color-b));
  display: unset;
  margin-right: var(--padm);
  position: relative;*/
}

.profile:not(.in_view) .score
{
  /*color: rgb(var(--color-c));*/
}

.profile .follow 
{
  /*grid-area: follow;*/
  /*padding: 0 var(--pad);*/
}

.profile .pubkey .xpub
{
  display: none;
  grid-area: xpub;
  justify-self: stretch;
  max-width: calc(var(--size) - var(--pad));
  overflow-x: scroll;
  text-align: right;
}

.profile.in_view .pubkey .xpub 
{
  display: unset;
  max-width: 30vw;
  max-width: unset;
  margin-right: var(--pad);
}

.profile .pubkey .author
{
  /*align-items: center;*/
  grid-area: author;
  font-size: var(--font-size);
  justify-self: stretch;
  z-index: 1;
}

.profile.in_view .pubkey .author
{
  width: min-content;
  width: minmax(100px,200px);
}

.profile .pubkey .author::before
{
  height: var(--size-s);
  width: var(--size-s);
}

/*.profile.in_view .pubkey .author::before
{
  /*background: rgb(var(--color-alt));*!/
  color: rgb(var(--color-f));
  content: "X";
  display: block;
  font-size: var(--font-size);
  height: auto;
  /*justify-self: start;*!/
  padding: var(--padm);  
  text-align: center;
  width: 1rem;
  grid-area: before;
  z-index: 2;
  /*opacity: 0.5;*!/
}*/

/*.profile .pubkey .author[data-nip05]::after
{
  background: rgb(var(--color-a));
  padding: var(--padm);
}*/

.profile .pubkey .author span
{
  justify-self: start;
  padding: var(--padm);
}

.profile.in_view .pubkey .author::after
{
  /*display: none;*/
}

.profile .pubkey .author img
{
  height: 1.8rem;
  width: 1.8rem;
}

.profile.in_view .pubkey .author img
{
  /*display: none;*/
}

.profile:not(.in_view) > .pubkey .created_at
{
  color: rgb(var(--color-d));
  font-size: 0;
  padding-left: 0;
}


.in_view > .pubkey .created_at::after 
{
  margin-left: var(--pad);
}

.profile .metadata
{
  align-items: start;
  align-self: start;
  display: none;
  grid-area: metadata;
  grid-template-areas: "name";
}

.profile.in_view .metadata 
{
  display: grid;
  grid-template-areas: 
  "picture"
  "name"
  "luds"
  "about"
  ;
}

.profile .metadata p,
.profile .extradata p
{
  overflow-x: scroll;
  width: 100%;
}

.metadata > *
{
  background: rgb(var(--color-a));
  box-sizing: border-box;
  color: rgb(var(--color-f));
  display: none;
  font-size: var(--font-size-s);
  justify-self: start;
  margin: 0;
  margin-bottom: 1px;
  overflow: scroll;
  padding: var(--padm) var(--pad);
  white-space: nowrap;
}

.profile .butt.refresh
{
  font-size: var(--font-size-s);
  margin: 0;
  padding: var(--padm) var(--pad);
}

.profile .butt.refresh::before
{
  content: "=> ";
}

.profile .butt.refresh::after
{
  content: " (" attr(data-last)")";
  opacity: .5;
}

.profile.in_view .metadata > *
{
  display: unset;
}

.profile .metadata .empty 
{
  color: rgb(var(--color-d));
  font-size: var(--font-size-s);
  grid-row: 99;
  grid-area: unset;
  justify-self: start;
  line-height: 1;
  margin: 0;
  margin-bottom: 1px;
  padding-top: var(--padm);
  padding-bottom: var(--padm);
}

[data-meta]::before, 
.metadata .empty::before 
{
  content: attr(data-meta) ": ";
}

.metadata .empty::before 
{
  text-decoration: line-through;
}

.profile .metadata a
{
  text-decoration: none;
}

.metadata [data-meta="name"]::before, 
.metadata [data-meta="nip05"]::before
{
  content: none;
}

.metadata [data-meta="name"]
{
  font-size: var(--font-size);
  grid-area: name;
  justify-self: start;
  padding-bottom: 0;
  padding-top: 0;
  z-index: 1;
}

[data-meta="nip05"]
{
  align-self: end;
  cursor: pointer;
  font-size: var(--font-size-s);
  grid-area: name;
  justify-self: end;
}

.profile.in_view [data-meta="nip05"]
{
  justify-self: start;
  margin-bottom: 0;
  margin-top: 1.4rem;
  padding-bottom: 1px;
}

[data-meta="nip05"]::after 
{
  color: rgb(var(--color-c));
  content: " " attr(data-verified);
}

[data-meta="picture"], 
[data-meta="banner"]
{
  grid-area: picture;
  line-height: 1;
  padding: 0;
  transition: var(--trans-quart);
}

[data-meta="picture"]
{
  align-self: end;
}

p[data-meta="banner"], 
p[data-meta="picture"]
{
  padding: var(--pad);
}

p[data-meta="banner"]
{
  margin-bottom: var(--line);
}

img[data-meta="banner"]
{
  background: none;
  grid-area: picture;
  height: unset;
  max-height: var(--media-height);
  margin: 0;
  object-fit: cover;
  object-position: 50% 50%;
  padding: 0;
  width: 100%;
}

img[data-meta="banner"]:hover
{
  max-height: var(--media-max-height);
  object-fit: contain;
  z-index: 2;
}

img[data-meta="picture"] 
{
  align-self: end;
  background: transparent;
  box-sizing: border-box;
  max-height: var(--media-height);
  max-width: 30vw;
  object-fit: contain;
  object-position: 0% 0%;
  padding: var(--pad);
  z-index: 1;
}

[data-meta="about"]  
{
  color: rgb(var(--color-d));
  font-size: var(--font-size);
  grid-area: about;
  hyphens: auto;
  padding: var(--pad);
  padding-top: 0;
  white-space: pre-wrap;
  word-break: break-word;
}

p[data-meta="about"]::before 
{
  content: "\\";
  display: block;
}

[data-meta="lud06"], 
[data-meta="lud16"] 
{
  grid-area: luds;
  margin-bottom: 0;
}

[data-meta="lud06"]::before, 
[data-meta="lud16"]::before 
{
  content: "\020BF⚡️";
  margin-right: var(--padm);
}

[data-meta="lud16"] 
{
  z-index: 1;
}

[data-meta="lud06"]:hover
{
  z-index: 2;
}

.extradata
{
  display: none;
  grid-area: extradata;
  /*justify-self: start;*/
}

.profile.in_view > .extradata
{
  display: grid;
}

.extradata details 
{
  background: rgb(var(--color-a));
  margin-bottom: 1px;
  padding: var(--pad);
}

.extradata details[open]
{
  border-left: none;
}

.extradata details > summary
{
  display: inline;
}

.author_list
{
  display: grid;
  /*width: 100%;*/
  grid-template-columns: repeat(auto-fit, minmax(6rem,1fr));
  /*grid-auto-flow: column;*/
  
}

.extradata .bffs,
.extradata .followers,
.extradata .relays
{
  color: rgb(var(--color-f));
  font-size: var(--font-size-s);
  list-style-type: none;
  padding: var(--pad);
}

.extradata .bff
{
  display: inline-grid;
  padding: var(--pad);
}

.extradata .a
{
  color: rgb(var(--color-d));
}

.extradata p.item 
{
  background: rgb(var(--color-a));
  box-sizing: border-box;
  font-size: var(--font-size-s);
  margin-bottom: 1px;
  margin: 0;
  padding: var(--pad);
}

/* @end */

/* @group profile actions */

.profile > .actions
{
  align-self: stretch;
  display: none;
  grid-area: actions;
  margin: 0;
  padding: var(--padm);
  padding: 0;
  
  /*display: grid;*/
  /*font-size: var(--font-size-s);*/
  grid-auto-flow: column;
  grid-gap: var(--padm);
  grid-gap: 0;
  /*justify-content: end;*/
  /*justify-items: end;*/
  /*justify-self: end;*/
  line-height: 1.5;
  
/*  align-self: start;
  background: rgb(var(--color-b));
  display: none;
  grid-area: actions;
  grid-auto-flow: column;
  grid-gap: var(--line);
  justify-content: start;
  justify-items: start;
  margin: 0;
  padding: 0 var(--pad);*/
}

.profile.in_view > .actions
{
  display: grid;
  /*align-self: stretch;*/
  /*border-bottom: 1px dashed rgb(var(--color-d));*/
  /*bottom: unset;*/
  color: rgb(var(--color-d));
  /*grid-area: actions;*/
  /*position: relative;*/
  position: sticky;
  top: 0;
  z-index: 3;
}

.profile.in_view > .actions .butt
{
  
}

/* @end */

/* @group kind-1 */

.note[data-kind="1"]:not(.tiny):not(.in_view)::before
{
  display: none;
}

.note[data-kind="1"].root:not(.in_view):not(.in_path) > .content::after
{
  /*padding-bottom: var(--line);*/
}

/*.note[data-kind="1"] > .content*/


/* @end */

/* @group tiny */

.note.tiny
{
  background: rgba(var(--color-b));
  margin: 0;
}

.note.tiny[data-kind="7"]
{
  border: none;
}

.note.in_view > .replies > .note.tiny,
.note.tiny:not(.in_view)
{
  grid-template-areas: "before content after by";
  grid-template-columns: auto auto auto 1fr;
}

.note.tiny:not(.in_view) > .by .author span
{
  margin-left: 0;
}

.note.tiny:not(.in_view)::before
{
  content: attr(data-kind);
  font-size: var(--font-size-s);
  padding: 0 var(--padm);
  align-self: center;
  grid-area: before;
}

.note.tiny[data-kind="7"]:not(.in_view)::before,
.note.tiny[data-kind="6"]:not(.in_view)::before,
.note.tiny[data-kind="16"]:not(.in_view)::before,
.note.tiny[data-kind="7"]:not(.in_view)::after,
.note.tiny[data-kind="6"]:not(.in_view)::after,
.note.tiny[data-kind="16"]:not(.in_view)::after
{
  display: none;
}

.note.in_view > .replies > .note.note.tiny > .content,
.note.tiny:not(.in_view) > .content
{
  border-top: none;
  border-bottom: none;
  font-size: var(--font-size-s);
  padding-bottom: var(--padm);
  padding-left: 5px;
  padding-top: var(--padm);
  margin: 0;
  min-width: calc(1rem + 1px);
}

.note.tiny:not(.in_view) .paragraph
{
  line-height: 1;
  margin-bottom: 0;
  padding: 0;
}

.note.tiny:not(.in_view) > .content > *,
.note.tiny:not(.in_view) > .actions,
.note.tiny:not(.in_view) > .details,
.note.tiny:not(.in_view) > .replies,
.note.tiny:not(.in_view) > .by .author .picture,
.note.tiny:not(.in_view) > .by .author::before
{
  display: none;
}

.note.root.tiny:not(.in_view) > .details
{
  display: none!important;
}

.note.tiny[data-kind="7"]:not(.in_view) > .content > *
{
  display: block;
}

.note.tiny[data-kind="6"]:not(.in_view) > .content::before,
.note.tiny[data-kind="16"]:not(.in_view) > .content::before
{
  color: rgb(var(--color-d));
  content: "reposted by ";
}

.note.root:not(.in_path).tiny 
{
  border-bottom: none;
  margin-bottom: 0;
  margin-top: 0;
}

.note.tiny > .actions > .butt.hide
{
  color: rgb(var(--color-no));
}

.note.tiny::after
{
  align-self: center;
  background: rgb(var(--color-b));
  content: attr(data-seen) " - " attr(data-subs);
  font-size: var(--font-size-xs);
  grid-area: after;
  padding: 0 var(--padm);
  text-align: center;
}

/* @end */

/* @group dialog */

#dialog
{
  background: rgb(var(--color-b));
  border: none;
  color: rgb(var(--color-d));
  max-height: var(--media-max-height);
  padding: 0;
}

#dialog[open]::backdrop
{
  background: black;
  opacity: .618;
}

#dialog_options
{
  display: grid;
  grid-template-columns: 1fr 1fr;
  grid-gap: var(--pad);
  justify-content: center;
  justify-items: center;
  margin: 0;
  padding: var(--pad);
  position: sticky;
  position: -webkit-sticky;
  bottom: 0;
  background: rgb(var(--color-b));
}

#dialog[title]::before
{
  color: rgb(var(--color-main));
  content: attr(title);
  display: block;
  text-align: center;
  margin: var(--pad) 0;
}

#dialog .tags 
{
  padding: 0;
}

#dialog .tags li
{
  color: rgb(var(--color-d));
}

#dialog .tags li:last-child
{
  color: rgb(var(--color-f));
}

#dialog .tags li button
{
  pointer-events: none;
}

.removed_tags
{
  font-size: var(--font-size-s);
  margin: var(--line) auto;
  padding-left: var(--line);
}

.removed_tags .disabled
{
  text-decoration: line-through;
}

/* @end */

/* @group notice */

.notice
{
  align-items: start;
  display: grid;
  grid-gap: 0 var(--pad);
  grid-template-areas:
  "title no yes"
  "description . ."
}

.notice .title
{
  grid-area: title;
}

.notice .description
{
  grid-area: description;
}

.notice .no
{
  grid-area: no;
}

.notice .yes
{
  grid-area: yes;
}

/* @end */

/* @group e_e */

#e_e
{
  display: grid;
  grid-template-areas:
  "id" "pubkey" "kind" "created_at" "content" "tags" "sig";
  /*grid-template-columns: ;*/
}

#e_e > li
{
  list-style-type: none;
  list-style-position: unset;
  margin: var(--pad);
}

#e_e > li::before
{
  content: attr(data-label);
  display: block;
  font-size: var(--font-size-s);
  width: calc(1em * 7);
}

.ee_id
{
  grid-area: id
}

.ee_pubkey
{
  grid-area: pubkey
}

.ee_kind
{
  grid-area: kind
}

.ee_created_at
{
  grid-area: created_at
}

.ee_content
{
  grid-area: content
}

.ee_tags
{
  grid-area: tags
}

.ee_sig
{
  grid-area: sig
}

/* @end */

@media screen and (max-width: 769px) 
{
  :root {
    --font-size: 14px;
  }
  
  .note
  {
/*    background: rgba(var(--c),.1);
    box-sizing: border-box;
    border-left: 1px dotted rgba(var(--color-c),.5);
    border-top: 1px dotted rgba(var(--color-c),.5);
    cursor: auto;
    display: grid;*/
    grid-template-areas: 
    "by by"
    "content content"
    "tags tags"
    "actions actions"
    "after after"
    "replies replies"
    "sig sig"
    ;
    grid-template-columns: 1fr auto;
    grid-template-rows: auto 1fr auto;
/*    position: relative;
    --who: attr(data-who);
    z-index: 1;*/
  }
  
  .note.root:not(.in_path),
  .note.in_view > .replies > .note,
  #notes > .note:not(.root):not(.in_path)
  {
    grid-template-areas: 
    "by      by"
    "content content"
    "tags    tags"
    "actions actions"
    "replies replies"
    "sig     sig"
    "after   after"
    ;
  }
  
  .root:not(.in_view):not(.in_path) > .content
  {
    margin-bottom: var(--pad);
    position: relative;
    top: 0;
    z-index: 0;
  }
  
}
